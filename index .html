<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Công Cụ Tra Cứu Ngày Vận Hạn</title>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* CSS TỐI ƯU CHO ĐIỆN THOẠI */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
        }
        
        html, body {
            width: 100%;
            height: 100%;
            overflow-x: hidden;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 15px;
            line-height: 1.5;
            color: #333;
            background: #f0f2f5;
            padding: 10px;
        }
        
        .container {
            width: 100%;
            max-width: 100%;
            margin: 0 auto;
            background: white;
            border-radius: 10px;
            overflow: hidden;
            padding: 15px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        /* Header */
        header {
            text-align: center;
            margin: -15px -15px 20px -15px;
            padding: 20px 15px;
            background: linear-gradient(135deg, #1e88e5, #0d47a1);
            color: white;
        }
        
        header h1 {
            font-size: 1.5rem;
            font-weight: 600;
            margin-bottom: 8px;
        }
        
        header h1 i {
            margin-right: 10px;
        }
        
        .subtitle {
            font-size: 0.9rem;
            opacity: 0.9;
        }
        
        /* Form section */
        .form-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
        }
        
        .section-title {
            font-size: 1.2rem;
            color: #0d47a1;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #1e88e5;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        /* Form grid */
        .form-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 12px;
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 10px;
        }
        
        .form-group label {
            display: block;
            font-size: 0.9rem;
            font-weight: 600;
            color: #444;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .form-group label i {
            color: #1e88e5;
            width: 18px;
        }
        
        .form-control {
            width: 100%;
            padding: 10px 12px;
            font-size: 1rem;
            border: 1px solid #ddd;
            border-radius: 6px;
            background: #fafafa;
        }
        
        .form-control:focus {
            border-color: #1e88e5;
            background: white;
            outline: none;
        }
        
        /* Input groups */
        .input-group {
            display: flex;
            gap: 8px;
            align-items: center;
        }
        
        .input-group input {
            flex: 1;
        }
        
        .btn-copy {
            background: #1e88e5;
            color: white;
            border: none;
            border-radius: 6px;
            padding: 10px 12px;
            cursor: pointer;
            min-width: 44px;
            min-height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* Buttons */
        .btn {
            padding: 12px 16px;
            font-size: 1rem;
            font-weight: 600;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            margin: 5px;
            min-height: 44px;
        }
        
        .btn-primary {
            background: #1e88e5;
            color: white;
        }
        
        .btn-success {
            background: #4caf50;
            color: white;
        }
        
        .btn-warning {
            background: #ff9800;
            color: white;
        }
        
        .btn-danger {
            background: #f44336;
            color: white;
        }
        
        .button-row {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 15px;
            justify-content: center;
        }
        
        /* Table section */
        .table-section {
            background: white;
            border-radius: 8px;
            padding: 15px;
            margin-top: 20px;
            border: 1px solid #e0e0e0;
        }
        
        .table-responsive {
            width: 100%;
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
            margin: 15px 0;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
        }
        
        .data-table {
            width: 100%;
            min-width: 1000px;
            border-collapse: collapse;
            font-size: 0.85rem;
        }
        
        .data-table thead {
            background: #0d47a1;
            color: white;
        }
        
        .data-table th {
            padding: 12px 8px;
            text-align: left;
            font-weight: 600;
            font-size: 0.9rem;
            white-space: nowrap;
            border-right: 1px solid rgba(255,255,255,0.1);
        }
        
        .data-table td {
            padding: 10px 8px;
            border-bottom: 1px solid #eee;
            vertical-align: middle;
        }
        
        .data-table tbody tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        
        .data-table tbody tr:hover {
            background-color: #e3f2fd;
        }
        
        /* Footer */
        .footer {
            margin-top: 20px;
            padding-top: 15px;
            border-top: 2px solid #1e88e5;
            text-align: center;
            font-size: 0.85rem;
            color: #666;
        }
        
        /* Responsive */
        @media (max-width: 768px) {
            .form-grid {
                grid-template-columns: 1fr;
            }
            
            .btn {
                width: 100%;
                margin: 5px 0;
            }
            
            .button-row {
                flex-direction: column;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 8px;
            }
            
            .container {
                padding: 12px;
            }
            
            header {
                padding: 15px 12px;
                margin: -12px -12px 15px -12px;
            }
            
            header h1 {
                font-size: 1.3rem;
            }
            
            .section-title {
                font-size: 1.1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-calendar-alt"></i> Công Cụ Tính Ngày Vận Hạn</h1>
            <p class="subtitle">Nhập dữ liệu theo bảng và tự động tính toán</p>
        </header>

        <!-- Form nhập liệu -->
        <div class="form-section">
            <div class="section-title">
                <i class="fas fa-edit"></i> Nhập Dữ Liệu Mới
            </div>
            
            <div class="form-grid">
                <div class="form-group">
                    <label for="ttNgaySinh"><i class="fas fa-sort-numeric-down"></i> TT Ngày Sinh:</label>
                    <div class="input-group">
                        <input type="number" id="ttNgaySinh" class="form-control" placeholder="VD: 25993" value="25993">
                        <button class="btn-copy" onclick="copyValue('ttNgaySinh')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="ngayVanHan"><i class="fas fa-calendar-day"></i> Ngày Vận Hạn:</label>
                    <div class="input-group">
                        <input type="date" id="ngayVanHan" class="form-control" value="2025-03-22">
                        <button class="btn-copy" onclick="copyValue('ngayVanHan')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="ttNgayVH"><i class="fas fa-sort-numeric-down"></i> TT Ngày VH:</label>
                    <div class="input-group">
                        <input type="number" id="ttNgayVH" class="form-control" placeholder="VD: 45736" value="45736">
                        <button class="btn-copy" onclick="copyValue('ttNgayVH')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="amLich"><i class="fas fa-moon"></i> Âm Lịch:</label>
                    <div class="input-group">
                        <input type="text" id="amLich" class="form-control" placeholder="22/2/2025" value="22/2/2025">
                        <button class="btn-copy" onclick="copyValue('amLich')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="duongLich"><i class="fas fa-calendar"></i> Dương Lịch:</label>
                    <div class="input-group">
                        <input type="text" id="duongLich" class="form-control" placeholder="22/03/2025" value="22/03/2025">
                        <button class="btn-copy" onclick="copyValue('duongLich')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="gio"><i class="fas fa-clock"></i> Giờ:</label>
                    <div class="input-group">
                        <input type="time" id="gio" class="form-control" value="06:49">
                        <button class="btn-copy" onclick="copyValue('gio')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="soTT"><i class="fas fa-hashtag"></i> Số TT:</label>
                    <div class="input-group">
                        <input type="number" id="soTT" class="form-control" placeholder="VD: 409" value="409">
                        <button class="btn-copy" onclick="copyValue('soTT')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="ten"><i class="fas fa-user"></i> Tên:</label>
                    <div class="input-group">
                        <input type="text" id="ten" class="form-control" placeholder="VD: NAM" value="NAM">
                        <button class="btn-copy" onclick="copyValue('ten')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group" style="grid-column: 1 / -1;">
                    <label for="trieuChung"><i class="fas fa-heartbeat"></i> Triệu chứng:</label>
                    <div class="input-group">
                        <textarea id="trieuChung" class="form-control" rows="2" placeholder="Hoa mắt, chóng mặt...">Hoa mắt, chóng mặt</textarea>
                        <button class="btn-copy" onclick="copyValue('trieuChung')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="tietKhi"><i class="fas fa-leaf"></i> Tiết khí:</label>
                    <div class="input-group">
                        <input type="text" id="tietKhi" class="form-control" placeholder="Tiết khí">
                        <button class="btn-copy" onclick="copyValue('tietKhi')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="anDong"><i class="fas fa-utensils"></i> Ăn Đông:</label>
                    <div class="input-group">
                        <input type="text" id="anDong" class="form-control" placeholder="Ăn Đông">
                        <button class="btn-copy" onclick="copyValue('anDong')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="anTay"><i class="fas fa-utensils"></i> Ăn Tây:</label>
                    <div class="input-group">
                        <input type="text" id="anTay" class="form-control" placeholder="Ăn Tây">
                        <button class="btn-copy" onclick="copyValue('anTay')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="tayY"><i class="fas fa-pills"></i> Tây Y:</label>
                    <div class="input-group">
                        <input type="text" id="tayY" class="form-control" placeholder="Tây Y">
                        <button class="btn-copy" onclick="copyValue('tayY')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="duongSinh"><i class="fas fa-spa"></i> Dưỡng sinh:</label>
                    <div class="input-group">
                        <input type="text" id="duongSinh" class="form-control" placeholder="Dưỡng sinh">
                        <button class="btn-copy" onclick="copyValue('duongSinh')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="monAnGiaVi"><i class="fas fa-pepper-hot"></i> Món ăn gia vị:</label>
                    <div class="input-group">
                        <input type="text" id="monAnGiaVi" class="form-control" placeholder="Món ăn gia vị">
                        <button class="btn-copy" onclick="copyValue('monAnGiaVi')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="homTruoc"><i class="fas fa-history"></i> Hôm trước:</label>
                    <div class="input-group">
                        <input type="text" id="homTruoc" class="form-control" placeholder="Hôm trước">
                        <button class="btn-copy" onclick="copyValue('homTruoc')">
                            <i class="fas fa-copy"></i>
                        </button>
                    </div>
                </div>
            </div>
            
            <div class="button-row">
                <button class="btn btn-success" onclick="addNewRow()">
                    <i class="fas fa-plus"></i> Thêm Dòng
                </button>
                <button class="btn btn-primary" onclick="calculateAll()">
                    <i class="fas fa-calculator"></i> Tính Toán
                </button>
                <button class="btn btn-warning" onclick="clearForm()">
                    <i class="fas fa-eraser"></i> Xóa Form
                </button>
                <button class="btn btn-danger" onclick="clearTable()">
                    <i class="fas fa-trash"></i> Xóa Bảng
                </button>
            </div>
        </div>

        <!-- Bảng dữ liệu -->
        <div class="table-section">
            <div class="section-title">
                <i class="fas fa-table"></i> Bảng Dữ Liệu
            </div>
            
            <div class="table-responsive">
                <table class="data-table" id="dataTable">
                    <thead>
                        <tr>
                            <th>TT</th>
                            <th>TT Ngày Sinh</th>
                            <th>Ngày Vận Hạn</th>
                            <th>TT Ngày VH</th>
                            <th>Âm Lịch</th>
                            <th>Dương Lịch</th>
                            <th>Giờ</th>
                            <th>Số TT</th>
                            <th>Tên</th>
                            <th>Triệu chứng</th>
                            <th>Tiết khí</th>
                            <th>Ăn Đông</th>
                            <th>Ăn Tây</th>
                            <th>Tây Y</th>
                            <th>Dưỡng sinh</th>
                            <th>Món ăn gia vị</th>
                            <th>Hôm trước</th>
                            <th>Hành động</th>
                        </tr>
                    </thead>
                    <tbody id="tableBody">
                        <!-- Dữ liệu sẽ được thêm ở đây -->
                    </tbody>
                </table>
            </div>
            
            <div style="text-align: center; margin-top: 15px;">
                <button class="btn btn-primary" onclick="exportData()">
                    <i class="fas fa-download"></i> Xuất Dữ Liệu
                </button>
                <button class="btn btn-warning" onclick="importData()">
                    <i class="fas fa-upload"></i> Nhập Dữ Liệu
                </button>
            </div>
        </div>

        <div class="footer">
            <p>Công Cụ Tính Ngày Vận Hạn &copy; 2024 | Phiên bản 1.0</p>
        </div>
    </div>

    <script>
        // Biến lưu trữ dữ liệu
        let data = [];
        let counter = 1;
        
        // Hàm copy giá trị
        function copyValue(id) {
            const element = document.getElementById(id);
            element.select();
            element.setSelectionRange(0, 99999);
            navigator.clipboard.writeText(element.value)
                .then(() => {
                    alert('Đã sao chép: ' + element.value);
                })
                .catch(err => {
                    console.error('Lỗi khi sao chép: ', err);
                });
        }
        
        // Hàm thêm dòng mới
        function addNewRow() {
            const row = {
                id: counter++,
                ttNgaySinh: document.getElementById('ttNgaySinh').value || '25993',
                ngayVanHan: formatDate(document.getElementById('ngayVanHan').value) || '22/03/2025',
                ttNgayVH: document.getElementById('ttNgayVH').value || '45736',
                amLich: document.getElementById('amLich').value || '22/2/2025',
                duongLich: document.getElementById('duongLich').value || '22/03/2025',
                gio: document.getElementById('gio').value || '06:49',
                soTT: document.getElementById('soTT').value || '409',
                ten: document.getElementById('ten').value || 'NAM',
                trieuChung: document.getElementById('trieuChung').value || 'Hoa mắt, chóng mặt',
                tietKhi: document.getElementById('tietKhi').value || '',
                anDong: document.getElementById('anDong').value || '',
                anTay: document.getElementById('anTay').value || '',
                tayY: document.getElementById('tayY').value || '',
                duongSinh: document.getElementById('duongSinh').value || '',
                monAnGiaVi: document.getElementById('monAnGiaVi').value || '',
                homTruoc: document.getElementById('homTruoc').value || ''
            };
            
            data.push(row);
            updateTable();
            calculateAll();
        }
        
        // Hàm định dạng ngày
        function formatDate(dateString) {
            if (!dateString) return '';
            const date = new Date(dateString);
            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        }
        
        // Hàm cập nhật bảng
        function updateTable() {
            const tbody = document.getElementById('tableBody');
            tbody.innerHTML = '';
            
            data.forEach((row, index) => {
                const tr = document.createElement('tr');
                tr.innerHTML = `
                    <td>${row.id}</td>
                    <td>${row.ttNgaySinh}</td>
                    <td>${row.ngayVanHan}</td>
                    <td>${row.ttNgayVH}</td>
                    <td>${row.amLich}</td>
                    <td>${row.duongLich}</td>
                    <td>${row.gio}</td>
                    <td>${row.soTT}</td>
                    <td>${row.ten}</td>
                    <td>${row.trieuChung}</td>
                    <td>${row.tietKhi}</td>
                    <td>${row.anDong}</td>
                    <td>${row.anTay}</td>
                    <td>${row.tayY}</td>
                    <td>${row.duongSinh}</td>
                    <td>${row.monAnGiaVi}</td>
                    <td>${row.homTruoc}</td>
                    <td>
                        <button class="btn-copy" onclick="copyRow(${index})" style="padding: 5px 8px; font-size: 0.8rem;">
                            <i class="fas fa-copy"></i>
                        </button>
                        <button class="btn-copy" onclick="deleteRow(${index})" style="padding: 5px 8px; font-size: 0.8rem; background: #f44336;">
                            <i class="fas fa-trash"></i>
                        </button>
                    </td>
                `;
                tbody.appendChild(tr);
            });
            
            // Thêm dữ liệu mẫu nếu bảng trống
            if (data.length === 0) {
                addSampleData();
            }
        }
        
        // Hàm thêm dữ liệu mẫu
        function addSampleData() {
            const sampleData = [
                {
                    id: counter++,
                    ttNgaySinh: '25993',
                    ngayVanHan: '22/03/2025',
                    ttNgayVH: '45736',
                    amLich: '22/2/2025',
                    duongLich: '22/03/2025',
                    gio: '06:49',
                    soTT: '409',
                    ten: 'NAM',
                    trieuChung: 'Hoa mắt, chóng mặt',
                    tietKhi: '',
                    anDong: '',
                    anTay: '',
                    tayY: '',
                    duongSinh: '',
                    monAnGiaVi: '',
                    homTruoc: ''
                },
                {
                    id: counter++,
                    ttNgaySinh: '25993',
                    ngayVanHan: '27/06/2025',
                    ttNgayVH: '45833',
                    amLich: '2/6/2025',
                    duongLich: '27/6/2025',
                    gio: '13:28',
                    soTT: '808',
                    ten: 'NAM',
                    trieuChung: 'Dương bất thường',
                    tietKhi: '',
                    anDong: '',
                    anTay: '',
                    tayY: '',
                    duongSinh: '',
                    monAnGiaVi: '',
                    homTruoc: ''
                },
                {
                    id: counter++,
                    ttNgaySinh: '25993',
                    ngayVanHan: '28/06/2025',
                    ttNgayVH: '45834',
                    amLich: '3/6/2025',
                    duongLich: '28/6/2025',
                    gio: '16:35',
                    soTT: '995',
                    ten: 'NAM',
                    trieuChung: 'Tim đập mạnh / nhịp yếu',
                    tietKhi: '',
                    anDong: '',
                    anTay: '',
                    tayY: '',
                    duongSinh: '',
                    monAnGiaVi: '',
                    homTruoc: ''
                }
            ];
            
            data = [...sampleData];
            updateTable();
        }
        
        // Hàm tính toán
        function calculateAll() {
            // Đây là nơi bạn có thể thêm logic tính toán phức tạp
            alert('Đã tính toán xong tất cả dữ liệu!');
            
            // Cập nhật trạng thái
            data.forEach((row, index) => {
                // Thêm tính toán vào đây nếu cần
            });
            
            updateTable();
        }
        
        // Hàm copy dòng
        function copyRow(index) {
            const row = data[index];
            const rowText = Object.values(row).slice(0, -1).join('\t');
            navigator.clipboard.writeText(rowText)
                .then(() => {
                    alert('Đã sao chép dòng ' + (index + 1));
                })
                .catch(err => {
                    console.error('Lỗi khi sao chép: ', err);
                });
        }
        
        // Hàm xóa dòng
        function deleteRow(index) {
            if (confirm('Bạn có chắc muốn xóa dòng này?')) {
                data.splice(index, 1);
                updateTable();
            }
        }
        
        // Hàm xóa form
        function clearForm() {
            if (confirm('Bạn có chắc muốn xóa tất cả dữ liệu trong form?')) {
                document.getElementById('ttNgaySinh').value = '25993';
                document.getElementById('ngayVanHan').value = '2025-03-22';
                document.getElementById('ttNgayVH').value = '45736';
                document.getElementById('amLich').value = '22/2/2025';
                document.getElementById('duongLich').value = '22/03/2025';
                document.getElementById('gio').value = '06:49';
                document.getElementById('soTT').value = '409';
                document.getElementById('ten').value = 'NAM';
                document.getElementById('trieuChung').value = 'Hoa mắt, chóng mặt';
                document.getElementById('tietKhi').value = '';
                document.getElementById('anDong').value = '';
                document.getElementById('anTay').value = '';
                document.getElementById('tayY').value = '';
                document.getElementById('duongSinh').value = '';
                document.getElementById('monAnGiaVi').value = '';
                document.getElementById('homTruoc').value = '';
            }
        }
        
        // Hàm xóa bảng
        function clearTable() {
            if (confirm('Bạn có chắc muốn xóa toàn bộ bảng dữ liệu?')) {
                data = [];
                counter = 1;
                updateTable();
            }
        }
        
        // Hàm xuất dữ liệu
        function exportData() {
            if (data.length === 0) {
                alert('Không có dữ liệu để xuất!');
                return;
            }
            
            const headers = ['TT', 'TT Ngày Sinh', 'Ngày Vận Hạn', 'TT Ngày VH', 'Âm Lịch', 'Dương Lịch', 'Giờ', 'Số TT', 'Tên', 'Triệu chứng', 'Tiết khí', 'Ăn Đông', 'Ăn Tây', 'Tây Y', 'Dưỡng sinh', 'Món ăn gia vị', 'Hôm trước'];
            
            let csv = headers.join('\t') + '\n';
            
            data.forEach(row => {
                const values = [
                    row.id,
                    row.ttNgaySinh,
                    row.ngayVanHan,
                    row.ttNgayVH,
                    row.amLich,
                    row.duongLich,
                    row.gio,
                    row.soTT,
                    row.ten,
                    row.trieuChung,
                    row.tietKhi,
                    row.anDong,
                    row.anTay,
                    row.tayY,
                    row.duongSinh,
                    row.monAnGiaVi,
                    row.homTruoc
                ];
                csv += values.join('\t') + '\n';
            });
            
            const blob = new Blob([csv], { type: 'text/plain' });
            const url = window.URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = 'du-lieu-van-han.txt';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            window.URL.revokeObjectURL(url);
        }
        
        // Hàm nhập dữ liệu
        function importData() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.txt,.csv';
            
            input.onchange = function(e) {
                const file = e.target.files[0];
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    const content = e.target.result;
                    processImportedData(content);
                };
                
                reader.readAsText(file);
            };
            
            input.click();
        }
        
        // Hàm xử lý dữ liệu nhập
        function processImportedData(content) {
            const lines = content.split('\n').filter(line => line.trim() !== '');
            if (lines.length <= 1) {
                alert('File không có dữ liệu hợp lệ!');
                return;
            }
            
            data = [];
            counter = 1;
            
            // Bỏ qua header
            for (let i = 1; i < lines.length; i++) {
                const values = lines[i].split('\t');
                if (values.length >= 10) {
                    const row = {
                        id: counter++,
                        ttNgaySinh: values[1] || '',
                        ngayVanHan: values[2] || '',
                        ttNgayVH: values[3] || '',
                        amLich: values[4] || '',
                        duongLich: values[5] || '',
                        gio: values[6] || '',
                        soTT: values[7] || '',
                        ten: values[8] || '',
                        trieuChung: values[9] || '',
                        tietKhi: values[10] || '',
                        anDong: values[11] || '',
                        anTay: values[12] || '',
                        tayY: values[13] || '',
                        duongSinh: values[14] || '',
                        monAnGiaVi: values[15] || '',
                        homTruoc: values[16] || ''
                    };
                    data.push(row);
                }
            }
            
            updateTable();
            alert('Đã nhập ' + data.length + ' dòng dữ liệu!');
        }
        
        // Khởi tạo trang
        document.addEventListener('DOMContentLoaded', function() {
            // Thêm dữ liệu mẫu khi trang tải
            addSampleData();
            
            // Định dạng ngày mặc định cho input date
            const today = new Date();
            const tomorrow = new Date(today);
            tomorrow.setDate(today.getDate() + 1);
            document.getElementById('ngayVanHan').valueAsDate = tomorrow;
        });
    </script>
</body>
</html>